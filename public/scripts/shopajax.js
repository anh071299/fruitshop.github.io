import renderProduct from"../scripts/renderProduct.js";let toPrevPage=(e,a)=>`\n      <li class="page-item ${1==a?"disabled":""}">\n          <a class="page-link" href="${e}"> <span aria-hidden="true">&laquo;</span></a>\n      </li>    \n  `,toNextPage=(e,a,n)=>`\n      <li class="page-item ${a==n?"disabled":""}">\n          <a class="page-link" href="${e}"><span aria-hidden="true">&raquo;</span></a>\n      </li>    \n  `,currentPage=e=>`\n      <li class="page-item active">\n          <a class="page-link">${e}</a>\n      </li>\n  `,prevPage=e=>{let a="";for(let n=1;n<e;n++)a+=`\n      <li class="page-item">\n          <a class="page-link" href="?_page=${n}&_limit=6>">${n}</a>\n      </li>\n  `;return a},nextPage=(e,a)=>{let n="";for(let l=e+1;l<=a;l++)n+=`\n      <li class="page-item">\n          <a class="page-link" href="?_page=${l}&_limit=6>">${l}</a>\n      </li>\n  `;return n};function pagination({prev:e,next:a},n,l){return`\n      <ul class="pagination">\n          ${toPrevPage(e,n)}\n          ${prevPage(n)}\n          ${currentPage(n)}\n          ${nextPage(n,l)}\n          ${toNextPage(a,n,l)}\n      </ul>\n  `}$("#slider-range").slider({range:!0,min:0,max:500,values:[0,500],slide:function(e,a){$("#price").html("$"+a.values[0]+" - $"+a.values[1])}}),$("#price").html("$"+$("#slider-range").slider("values",0)+" - $"+$("#slider-range").slider("values",1));let url=new URL(window.location.href),productPerPage=Number(url.searchParams.get("_limit"))||6,page=Number(url.searchParams.get("_page"))||1,parseLink=e=>{let a=e.lastIndexOf("?"),n=e.lastIndexOf(">"),l=e.slice(a,n),t=Number(e.indexOf('"'))+1,i=e.indexOf('"',t);return{[e.slice(t,i)]:l}};$.get("/products").done(function(e){let a=0,n=0,l=0,t=0;$.each(e,function(i){"fruit"==e[i].category?a+=1:"vegetables"==e[i].category?n+=1:"milk"==e[i].category?l+=1:t+=1}),$(".categorie-list")[0].innerHTML=`\n    <li class="cat-item">\n        <a>Fruits<span/>${a}</span></a>\n    </li>\n    <li class="cat-item">\n        <a href="">Vegetables<span>${n}</span></a>\n    </li>\n    <li class="cat-item" >\n        <a href="">Dried<span>${t}</span></a>\n    </li>\n    <li class="cat-item ">\n        <a href="">Milk, Cream<span>${l}</span></a>\n    </li>\n`});let xhr=$.ajax({url:`/products?_page=${page}&_limit=${productPerPage}`,type:"GET",dataType:"json"}).done(function(e){let a=0;e=e.map(e=>`\n      <div class="col-12 col-md-6 col-xl-4" style="animation-delay:${a+=.05}s">\n   ${renderProduct(e)}\n  </div>`).join(""),$(".product-catalog .row").html(e);let n=xhr.getResponseHeader("x-total-count"),l=xhr.getResponseHeader("link");l&&(l=l.split(", ").map(e=>parseLink(e)),l=Object.assign({},...l));let t=Math.ceil(n/productPerPage),i=pagination(l,page,t);$(".nav").html(i)});